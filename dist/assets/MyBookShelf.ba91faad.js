import{_ as p,M as h,r as u,o as i,c as l,a as s,F as f,b,d as v,e as _,t as g,n as I,p as y,f as P,g as w,h as B}from"./index.56decd4f.js";const S={data:()=>({AreBooksFetched:!1,id:JSON.parse(localStorage.getItem("books")),products:[],page:1,currentPage:1,clientWidth:700,booksPerPage:8,replacedImg:"/img/book.png"}),created(){this.showInfo=h.showInfo,this.close=h.close,this.read=h.read},mounted(){this.clientWidth=document.body.clientWidth,this.clientWidth<790&&(this.booksPerPage=6),this.fetching(1)},methods:{changePages(e){this.currentPage=e,this.fetching(e)},async fetching(e){this.AreBooksFetched=!1;let t=e*this.booksPerPage-this.booksPerPage;this.products=[];for(let a=t;a<this.booksPerPage+t;a++)this.id&&this.id[a]&&await fetch(`https://www.googleapis.com/books/v1/volumes/${this.id[a]}`).then(c=>c.json()).then(c=>this.products.push(c));this.AreBooksFetched=!0},del(e){this.id.splice(e,1),localStorage.removeItem("books"),localStorage.setItem("books",JSON.stringify(this.id)),document.getElementById(`block${e}`).classList.add("none")}}},n=e=>(y("data-v-aa66930c"),e=e(),P(),e),C={class:"about"},L=n(()=>s("h1",null,"My Bookshelf",-1)),$={class:"container"},F={class:"description"},M=n(()=>s("p",{class:"description__text"},null,-1)),A={class:"books-container"},N=["id"],W=["onClick"],j=n(()=>s("img",{class:"icon",src:w,height:"25px",alt:""},null,-1)),E=[j],J=["href"],O=n(()=>s("img",{class:"icon",src:B,height:"25px",alt:""},null,-1)),V=[O],z=["src"],D={class:"book__title"},q=["onClick"],G=n(()=>s("span",null,"remove",-1)),H=[G],K=["href"],Q=["src"];function R(e,t,a,c,T,r){const m=u("vue-awesome-paginate");return i(),l("div",C,[L,s("div",$,[s("div",F,[s("button",{class:"description__close",onClick:t[0]||(t[0]=(...o)=>e.close&&e.close(...o))},"x"),M]),s("section",A,[(i(!0),l(f,null,b(e.products,(o,d)=>(i(),l("div",{class:"book",key:o.id,id:`block${d}`},[s("a",{class:"show-info",onClick:k=>e.showInfo(o)},E,8,W),s("a",{class:"read",href:e.read(o),target:"_blank"},V,8,J),s("img",{class:"book__image",src:o.volumeInfo.imageLinks?o.volumeInfo.imageLinks.thumbnail:e.replacedImg,alt:""},null,8,z),s("p",D,g(o.volumeInfo.title),1),s("p",null,g(o.volumeInfo.authors?o.volumeInfo.authors.join():""),1),s("button",{class:"remove-btn",onClick:k=>r.del(d)},H,8,q),o.saleInfo.buyLink?(i(),l("a",{key:0,class:I({book__buy:o.saleInfo.buyLink}),href:o.saleInfo.buyLink,target:"_blank"},[s("img",{class:"shop-cart",src:o.saleInfo.buyLink?"/img/icons/shopping-cart.svg":""},null,8,Q)],10,K)):_("",!0)],8,N))),128))]),e.AreBooksFetched?(i(),v(m,{key:0,"total-items":e.id.length,"items-per-page":e.booksPerPage,"max-pages-shown":5,"current-page":e.currentPage,"on-click":r.changePages},null,8,["total-items","items-per-page","current-page","on-click"])):_("",!0)])])}const X=p(S,[["render",R],["__scopeId","data-v-aa66930c"]]);export{X as default};
